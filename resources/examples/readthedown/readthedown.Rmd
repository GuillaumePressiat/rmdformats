---
title: "`readthedown` template example"
date: "`r Sys.Date()`"
author: Gpr
output:
  rmdformats::readthedown:
    code_folding: hide
    self_contained: true
    thumbnails: false
    lightbox: true
    highlight: tango
---


```{r knitr_init, echo=FALSE, results="asis", cache=FALSE}

## Global options
options(max.print = "75")
knitr::opts_chunk$set(echo = FALSE,
	             cache = FALSE,
               prompt = FALSE,
               tidy = FALSE,
               comment = NA,
               message = FALSE,
               warning = FALSE)
knitr::opts_knit$set(width = 75)

```

```{r}
library(knitr)
library(rmdformats)
library(DT)
```

# Code and tables

## Syntax highlighting

Here is a sample code chunk, just to show that syntax highlighting works as expected.

```{r sh, echo=TRUE, eval=TRUE}
library(ggplot2)
library(dplyr)

not_null <- function (v) {
  if (!is.null(v)) return(paste(v, "not null"))
}

data(iris)
tab <- iris %>%
  group_by(Species) %>%
  summarise(Sepal.Length = mean(Sepal.Length),
            Sepal.Width  = mean(Sepal.Width),
            Petal.Length = mean(Petal.Length),
            Petal.Width  = mean(Petal.Length))
```


## Verbatim

Here is the structure of the `iris` dataset.

```{r iris_str, echo=TRUE}
glimpse(iris)
```

And blockquote :

> Oh ! What a nice blockquote you have here. Much more wonderful than a classical Lorem Ipsum, really.

And we could also [include links](https://github.com/juba/rmdformats) or simply URLs like this : https://github.com/juba/rmdformats

## Table

Here is a sample table output.

```{r iris_table}
kable(tab)
```

Here is a sample `DT:datatable` output.

```{r iris_dt}
DT::datatable(tab)
```



Here we display a crosstab displayed in several different ways with a "pills"
interface. To do this, just pass your `table()` result to the `pilltabs()`
function.

```{r iris_pilltabs, results="asis"}

iris$seplc <- cut(iris$Sepal.Length,3)
tab <- table(iris$Species, iris$seplc)
pilltabs(tab)

```

# Mathjax

An incredibly complex equation :

$$ y = \sqrt{\frac{1}{x}} $$


# Figures

Here is an histogram.

```{r iris_hist}
ggplot(data=iris) +
    geom_histogram(aes(x=Petal.Width)) +
    facet_grid(Species~.)

```

And a wonderful scatterplot, with a caption.

```{r iris_scatter1}
ggplot(data=iris) + geom_point(aes(x=Petal.Width, y=Petal.Length, color=Species))
```

# Dynamic toc with for loop


```{r , results = 'asis', echo = TRUE}

themes <- list(theme_bw(), theme_classic(), theme_dark(), theme_minimal())
nthemes <- c('Black and white : `theme_bw`', 
             'Classic : `theme_classic`', 
             'Dark : `theme_dark`', 
             'Minimal `theme_minimal`')

for (i in 1:4){
  cat(paste0('\n\n## Chapter nÂ°', i, '\n\n'))
  cat(paste0('\n\n### ggplot theme ', nthemes[i], '\n\n'))
  print(ggplot(data=iris) + 
          geom_point(aes(x=Petal.Width, y=Petal.Length, color=Species)) + 
          themes[i])
}
```

